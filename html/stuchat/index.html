<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>嵌入聊天</title>
    <!--juggle库 all in one-->
    <!--
    <script src="js/lib/juggle-all.js" type="text/javascript"></script>
    -->
    <!--juggle库 small require-->
    <script src="js/lib/juggle-help.js" type="text/javascript"></script>
    <script src="js/lib/juggle-event.js" type="text/javascript"></script>
    <script src="js/lib/juggle-mv.js" type="text/javascript"></script>
    <script src="js/lib/juggle-websocket.js" type="text/javascript"></script>

    <script src="js/lib/jquery.min.js" type="text/javascript"></script>
    <script src="js/lib/jquery.mCustomScrollbar.concat.min.js" type="text/javascript"></script>

    <link href='js/anychat/css/anychat.css' rel='stylesheet' type='text/css'/>
    <link href='js/lib/jquery.mCustomScrollbar.min.css' rel='stylesheet' type='text/css'/>

    <!--源码文件-->
    <!--
        <script src="js/anychat/src/ChatObjEventType.js" type="text/javascript"></script>
        <script src="js/anychat/src/GetUrlParam.js" type="text/javascript"></script>
        <script src="js/anychat/src/NotificationExt.js" type="text/javascript"></script>
        <script src="js/anychat/src/LoginChatProxy.js" type="text/javascript"></script>
        <script src="js/anychat/src/UserObj.js" type="text/javascript"></script>
        <script src="js/anychat/src/GroupObj.js" type="text/javascript"></script>
        <script src="js/anychat/src/TalkMediator.js" type="text/javascript"></script>
    -->
    <!--合成文件-->
    <script src="js/anychat/dist/anychat.js" type="text/javascript"></script>

</head>
<script type="text/javascript">
    window.onload = function () {

        var curWwwPath=window.document.location.href;
        var pathName=window.document.location.pathname;
        var pos=curWwwPath.indexOf(pathName);
        var port=window.location.port;
        var portIndex=curWwwPath.indexOf(port);
        var ip=curWwwPath.substring(7,portIndex-1);
        //document.write(ip);
        anychat.loginChatProxy.url = "ws://"+ip+":8082/chat_server/ws"
        var talkMediator = new anychat.TalkMediator();
        alert(anychat.loginChatProxy.url)
        talkMediator.initView();
    }
</script>
<body>
<div class="window_P">
    <dl class="windowL_P fl">
        <dt>
            <span>通讯录</span>
        </dt>
        <dd>
            <ul id="talkList">

                <li class="group">
                    <p>我的好友<span class="cur_P" id="currentOnline">0</span>/ <span class="all_P" id="allUser">0</span>
                    </p>
                    <ul id="talkUserList">

                    </ul>
                </li>
            </ul>
        </dd>
    </dl>
    <dl class="windowR_P fl ">
        <dt>
            <span class="title_P" id="toTypeName">无</span>
            <i class="closeBtn_P" id="talk_close"></i>
        </dt>
        <dd class="talkCon_P" id="chatList">

        </dd>
        <dd class="funList_PJY">
            <div class="pr">
                <a href="javascript:;"></a>
                <a href="javascript:;" class="history_P"></a>
            </div>
        </dd>
        <dd class="textWin_P">
            <div>
                <textarea class="mytext_P" id="sendChatContent" style="width: 380px;height: 80px;"></textarea>
            </div>
        </dd>
        <dd class="btnList_P">
            <a href="javascript:;" class="send_P" id="sendChat">发送</a>
        </dd>

    </dl>
    <dl class="windowR_P left2_P fl">
        <dt>
            <span class="title2_P"> <i class="return_P" id="returnChat"></i>消息记录（<span id="toTypeName2"></span>）</span>
            <i class="closeBtn_P"></i>
        </dt>
        <dd class="hisList_P">
            <div id="histortChat">

            </div>
        </dd>
        <dd class="hisFoot_P">
            <div class="pageList_P">
                <a href="javascript:;" class="first_P" id="firstPage"></a>
                <a href="javascript:;" class="prev_P" id="prePage"></a>
                <a href="javascript:;" class="next_P" id="nextPage"></a>
                <a href="javascript:;" class="last_P" id="lastPage"></a>
            </div>
            <div class="timeBox_P">
                <a href="javascript:;" id="historyTime"></a>
                <input type="text" class="hide" id="d1"/>
            </div>
            <div class="clear"></div>
        </dd>

    </dl>
    <div class="clear"></div>
</div>
</body>
</html>